<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lise da Jornada dos Dados - VisDrone YOLO Training</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px;
            background: #f8f9fa;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1em;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .excellent { color: #27ae60; }
        .good { color: #f39c12; }
        .poor { color: #e74c3c; }

        .charts-section {
            padding: 30px;
        }

        .chart-container {
            background: white;
            margin-bottom: 30px;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .chart-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
            font-weight: bold;
        }

        .chart-wrapper {
            position: relative;
            height: 400px;
            margin-bottom: 20px;
        }

        .analysis-section {
            background: #f8f9fa;
            padding: 30px;
            margin-top: 20px;
        }

        .analysis-title {
            font-size: 1.8em;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .analysis-content {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .metric-explanation {
            margin-bottom: 25px;
            padding: 20px;
            background: #ecf0f1;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .metric-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .metric-description {
            color: #555;
            line-height: 1.6;
        }

        .journey-timeline {
            margin-top: 30px;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .timeline-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-size: 1.5em;
            color: white;
        }

        .timeline-content h4 {
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .timeline-content p {
            color: #666;
            font-size: 0.9em;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.2em;
            color: #666;
        }

        .error {
            background: #e74c3c;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                padding: 20px;
            }
            
            .chart-wrapper {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ An√°lise da Jornada dos Dados</h1>
            <p>VisDrone YOLO Training - Resultados Detalhados</p>
        </div>

        <div id="loading" class="loading">
            üìä Carregando e analisando dados...
        </div>

        <div id="content" style="display: none;">
            <!-- Estat√≠sticas Principais -->
            <div class="stats-grid" id="statsGrid">
                <!-- Ser√° preenchido dinamicamente -->
            </div>

            <!-- Gr√°ficos -->
            <div class="charts-section">
                <div class="chart-container">
                    <div class="chart-title">üìà Evolu√ß√£o das M√©tricas de Performance</div>
                    <div class="chart-wrapper">
                        <canvas id="metricsChart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">üìâ Fun√ß√µes de Perda (Loss Functions)</div>
                    <div class="chart-wrapper">
                        <canvas id="lossChart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">üéØ Precis√£o vs Recall</div>
                    <div class="chart-wrapper">
                        <canvas id="precisionRecallChart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">‚ö° Taxa de Aprendizado (Learning Rate)</div>
                    <div class="chart-wrapper">
                        <canvas id="learningRateChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- An√°lise Detalhada -->
            <div class="analysis-section">
                <div class="analysis-title">üîç An√°lise Detalhada da Jornada</div>
                <div class="analysis-content">
                    <div class="metric-explanation">
                        <div class="metric-title">üéØ mAP50(B) - A M√©trica Principal</div>
                        <div class="metric-description">
                            <strong>Mean Average Precision com IoU 0.5</strong> - Esta √© a m√©trica mais importante para avaliar a qualidade do seu detector de objetos. 
                            Seu modelo come√ßou com apenas <span id="map50-start">-</span>% de precis√£o e evoluiu para impressionantes <span id="map50-end">-</span>%, 
                            demonstrando um aprendizado massivo e eficaz.
                        </div>
                    </div>

                    <div class="metric-explanation">
                        <div class="metric-title">üìä Precis√£o e Recall</div>
                        <div class="metric-description">
                            <strong>Precis√£o:</strong> Das detec√ß√µes que o modelo fez, <span id="precision-final">-</span>% estavam corretas (poucos falsos positivos).<br>
                            <strong>Recall:</strong> O modelo encontrou <span id="recall-final">-</span>% de todos os objetos que realmente existiam (poucos falsos negativos).
                        </div>
                    </div>

                    <div class="metric-explanation">
                        <div class="metric-title">üìâ Fun√ß√µes de Perda</div>
                        <div class="metric-description">
                            <strong>Box Loss:</strong> Erro na localiza√ß√£o das caixas delimitadoras - diminuiu de <span id="box-loss-start">-</span> para <span id="box-loss-end">-</span>.<br>
                            <strong>Class Loss:</strong> Erro na classifica√ß√£o dos objetos - diminuiu de <span id="cls-loss-start">-</span> para <span id="cls-loss-end">-</span>.<br>
                            <strong>DFL Loss:</strong> Perda avan√ßada para refinar precis√£o das bordas - diminuiu de <span id="dfl-loss-start">-</span> para <span id="dfl-loss-end">-</span>.
                        </div>
                    </div>

                    <div class="journey-timeline">
                        <h3 style="text-align: center; margin-bottom: 30px; color: #2c3e50;">üõ§Ô∏è Timeline da Jornada de Aprendizado</h3>
                        
                        <div class="timeline-item">
                            <div class="timeline-icon" style="background: #e74c3c;">1Ô∏è‚É£</div>
                            <div class="timeline-content">
                                <h4>√âpoca 1-5: Primeiros Passos</h4>
                                <p>O modelo come√ßou "cego", com mAP50 de apenas 25.7%. As perdas eram altas, mas j√° mostrava sinais de aprendizado inicial.</p>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-icon" style="background: #f39c12;">2Ô∏è‚É£</div>
                            <div class="timeline-content">
                                <h4>√âpoca 6-20: Acelera√ß√£o</h4>
                                <p>Per√≠odo de crescimento r√°pido. O modelo come√ßou a entender padr√µes e melhorar significativamente suas m√©tricas.</p>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-icon" style="background: #27ae60;">3Ô∏è‚É£</div>
                            <div class="timeline-content">
                                <h4>√âpoca 21-50: Refinamento</h4>
                                <p>O modelo atingiu excel√™ncia, com mAP50 chegando a 92.8%. Aprendizado consistente sem sinais de overfitting.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Nova Se√ß√£o: Interpreta√ß√£o Cient√≠fica -->
                    <div style="margin-top: 40px; padding: 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; color: white;">
                        <h3 style="text-align: center; margin-bottom: 25px; font-size: 1.5em;">üß† Interpreta√ß√£o Cient√≠fica dos Dados</h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px; backdrop-filter: blur(10px);">
                                <h4 style="color: #ffd700; margin-bottom: 15px;">üéØ A Hist√≥ria das M√©tricas</h4>
                                <p style="line-height: 1.6; font-size: 0.95em;">
                                    <strong>mAP50:</strong> Evoluiu de 25.7% ‚Üí 92.8% (+67.1%). Isso significa que seu modelo passou de "quase aleat√≥rio" para "excelente detector".<br><br>
                                    <strong>Precis√£o:</strong> 91.5% final indica que quando o modelo diz "h√° um objeto aqui", ele est√° certo 9 vezes em 10.<br><br>
                                    <strong>Recall:</strong> 88.1% significa que o modelo encontra quase 9 em cada 10 objetos reais nas imagens.
                                </p>
                            </div>

                            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px; backdrop-filter: blur(10px);">
                                <h4 style="color: #ffd700; margin-bottom: 15px;">üìâ A Ci√™ncia das Perdas</h4>
                                <p style="line-height: 1.6; font-size: 0.95em;">
                                    <strong>Box Loss:</strong> Diminuiu de 2.03 ‚Üí 1.10. O modelo aprendeu a localizar objetos com precis√£o crescente.<br><br>
                                    <strong>Class Loss:</strong> Redu√ß√£o consistente mostra que o modelo parou de confundir classes (carro vs pedestre).<br><br>
                                    <strong>DFL Loss:</strong> Refinamento das bordas das caixas delimitadoras para maior precis√£o.
                                </p>
                            </div>

                            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px; backdrop-filter: blur(10px);">
                                <h4 style="color: #ffd700; margin-bottom: 15px;">‚ö° Estrat√©gia de Aprendizado</h4>
                                <p style="line-height: 1.6; font-size: 0.95em;">
                                    <strong>Warmup (√âpocas 1-3):</strong> Learning rate baixo para estabiliza√ß√£o inicial.<br><br>
                                    <strong>Crescimento:</strong> Aumento gradual da taxa de aprendizado para acelerar.<br><br>
                                    <strong>Decay:</strong> Redu√ß√£o gradual para refinamento fino nas √©pocas finais.
                                </p>
                            </div>

                            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px; backdrop-filter: blur(10px);">
                                <h4 style="color: #ffd700; margin-bottom: 15px;">üî¨ An√°lise de Overfitting</h4>
                                <p style="line-height: 1.6; font-size: 0.95em;">
                                    <strong>Sem Overfitting:</strong> Train e Validation losses seguem trajet√≥rias similares.<br><br>
                                    <strong>Generaliza√ß√£o:</strong> O modelo aprendeu padr√µes gerais, n√£o memorizou dados espec√≠ficos.<br><br>
                                    <strong>Robustez:</strong> Performance consistente em dados n√£o vistos durante treino.
                                </p>
                            </div>
                        </div>

                        <div style="margin-top: 25px; padding: 20px; background: rgba(255,255,255,0.15); border-radius: 8px; text-align: center;">
                            <h4 style="color: #ffd700; margin-bottom: 15px;">üèÜ Conclus√£o Cient√≠fica</h4>
                            <p style="font-size: 1.1em; line-height: 1.6;">
                                Seu modelo demonstrou um <strong>aprendizado saud√°vel e eficaz</strong>. A evolu√ß√£o consistente das m√©tricas, 
                                a aus√™ncia de overfitting e a alta performance final indicam que voc√™ tem um detector de objetos 
                                <strong>robusto e confi√°vel</strong> para o dataset VisDrone. O modelo n√£o apenas "decorou" os dados de treino, 
                                mas desenvolveu uma <strong>compreens√£o genu√≠na</strong> dos padr√µes visuais necess√°rios para detectar objetos.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let trainingData = [];
        let charts = {};

        // Dados incorporados diretamente (offline)
        function loadData() {
            // Dados do results.csv incorporados diretamente
            const csvData = `epoch,time,train/box_loss,train/cls_loss,train/dfl_loss,metrics/precision(B),metrics/recall(B),metrics/mAP50(B),metrics/mAP50-95(B),val/box_loss,val/cls_loss,val/dfl_loss,lr/pg0,lr/pg1,lr/pg2
1,92.934,1.98493,1.83792,1.12655,0.27454,0.30188,0.25756,0.1252,2.03426,1.72084,1.15581,0.0703093,0.00329897,0.00329897
2,161.466,1.91301,1.31162,1.0918,0.47681,0.17312,0.18902,0.09144,2.11163,2.10696,1.26987,0.040178,0.00650098,0.00650098
3,233.313,1.85022,1.20961,1.0781,0.39589,0.4556,0.40186,0.21691,1.95261,1.51528,1.151,0.00991464,0.009571,0.009571
4,300.611,1.79633,1.14299,1.06258,0.46852,0.31631,0.32277,0.17313,2.04747,1.53702,1.1896,0.009406,0.009406,0.009406
5,367.522,1.73992,1.06178,1.03692,0.57323,0.51862,0.54574,0.31826,1.79622,1.2246,1.06868,0.009208,0.009208,0.009208
6,434.689,1.688,1.01827,1.02636,0.57682,0.53807,0.56519,0.32147,1.67614,1.1899,1.04503,0.00901,0.00901,0.00901
7,499.408,1.6606,0.99376,1.01699,0.6988,0.61295,0.67454,0.39654,1.631,1.0832,1.02474,0.008812,0.008812,0.008812
8,566.2,1.61114,0.94705,1.00297,0.71746,0.65878,0.71417,0.40617,1.6926,1.05413,1.0434,0.008614,0.008614,0.008614
9,632.945,1.61547,0.94498,0.99988,0.76454,0.67642,0.76442,0.46664,1.58194,0.93076,1.01013,0.008416,0.008416,0.008416
10,698.426,1.56736,0.90825,0.9886,0.74373,0.66589,0.72712,0.42901,1.61979,0.96704,1.02322,0.008218,0.008218,0.008218
11,765.224,1.53756,0.88846,0.98106,0.79934,0.70696,0.79791,0.49011,1.5346,0.86719,0.99299,0.00802,0.00802,0.00802
12,832.317,1.5044,0.84913,0.97131,0.82871,0.72109,0.80769,0.51482,1.50028,0.89203,0.98909,0.007822,0.007822,0.007822
13,898.152,1.50678,0.8428,0.9717,0.79703,0.74128,0.81588,0.50823,1.50257,0.83989,0.99404,0.007624,0.007624,0.007624
14,964.682,1.48339,0.83356,0.9635,0.86079,0.756,0.83616,0.54441,1.43619,0.79264,0.97427,0.007426,0.007426,0.007426
15,1032.5,1.45427,0.80627,0.96009,0.79131,0.75582,0.82545,0.52473,1.48337,0.80694,0.98042,0.007228,0.007228,0.007228
16,1097.38,1.45641,0.79502,0.95818,0.82064,0.76233,0.84153,0.54621,1.43783,0.79174,0.96328,0.00703,0.00703,0.00703
17,1163.2,1.43929,0.78238,0.95243,0.84898,0.78563,0.86069,0.564,1.4296,0.7739,0.96504,0.006832,0.006832,0.006832
18,1228.94,1.42385,0.78241,0.94917,0.84141,0.79686,0.86405,0.57326,1.38165,0.74309,0.94997,0.006634,0.006634,0.006634
19,1295.2,1.42978,0.77459,0.94529,0.8471,0.80089,0.8719,0.5657,1.40288,0.77065,0.96154,0.006436,0.006436,0.006436
20,1360.9,1.40154,0.7596,0.94536,0.86188,0.79332,0.86792,0.57263,1.37285,0.74166,0.9523,0.006238,0.006238,0.006238
21,1427.68,1.37218,0.74305,0.93521,0.86482,0.80273,0.87106,0.58158,1.38001,0.72652,0.9493,0.00604,0.00604,0.00604
22,1493.42,1.38315,0.74815,0.9416,0.89551,0.80931,0.88297,0.5931,1.33826,0.71507,0.94339,0.005842,0.005842,0.005842
23,1559.96,1.37196,0.7408,0.93636,0.89993,0.8159,0.8887,0.6042,1.32695,0.71219,0.93966,0.005644,0.005644,0.005644
24,1626.58,1.35232,0.72883,0.93252,0.85658,0.79645,0.86923,0.58138,1.35373,0.72451,0.94434,0.005446,0.005446,0.005446
25,1690.84,1.36525,0.7337,0.93286,0.86305,0.84126,0.89336,0.60437,1.29778,0.68423,0.93381,0.005248,0.005248,0.005248
26,1757.34,1.32612,0.70553,0.92641,0.88038,0.83565,0.90209,0.61601,1.29761,0.6846,0.93314,0.00505,0.00505,0.00505
27,1822.61,1.32302,0.7037,0.92764,0.89356,0.83971,0.89675,0.62458,1.29492,0.6727,0.9321,0.004852,0.004852,0.004852
28,1887.69,1.32211,0.70259,0.92541,0.87802,0.83267,0.90153,0.62539,1.25883,0.66733,0.92527,0.004654,0.004654,0.004654
29,1953.5,1.31583,0.69589,0.92349,0.90106,0.83235,0.90308,0.62619,1.27786,0.66074,0.92563,0.004456,0.004456,0.004456
30,2018.35,1.29163,0.6838,0.91679,0.90799,0.83384,0.90471,0.64107,1.24562,0.64674,0.91941,0.004258,0.004258,0.004258
31,2084.91,1.28687,0.68215,0.91622,0.91213,0.8405,0.90999,0.63606,1.24799,0.66484,0.92092,0.00406,0.00406,0.00406
32,2151.11,1.28882,0.6816,0.91514,0.89537,0.85335,0.90814,0.63112,1.25133,0.66016,0.92152,0.003862,0.003862,0.003862
33,2215.7,1.26697,0.67213,0.91041,0.88614,0.84578,0.90788,0.64509,1.2329,0.64604,0.91599,0.003664,0.003664,0.003664
34,2281.52,1.27235,0.67387,0.91572,0.8841,0.86542,0.91157,0.64308,1.22107,0.64731,0.91461,0.003466,0.003466,0.003466
35,2345.77,1.25879,0.66369,0.91156,0.90331,0.85318,0.90977,0.64143,1.22091,0.63919,0.91184,0.003268,0.003268,0.003268
36,2411.23,1.2436,0.65689,0.90618,0.88618,0.85185,0.90976,0.64705,1.20974,0.63262,0.91145,0.00307,0.00307,0.00307
37,2478.69,1.23586,0.64928,0.90791,0.91214,0.85054,0.91601,0.65706,1.19235,0.62963,0.90806,0.002872,0.002872,0.002872
38,2544,1.24157,0.6555,0.90696,0.90842,0.85582,0.91582,0.65586,1.19425,0.63072,0.90698,0.002674,0.002674,0.002674
39,2609.63,1.23037,0.64962,0.90391,0.89575,0.86464,0.9172,0.65848,1.1921,0.62497,0.90521,0.002476,0.002476,0.002476
40,2676.49,1.21223,0.63796,0.90062,0.90599,0.87073,0.92264,0.66369,1.18495,0.61133,0.90444,0.002278,0.002278,0.002278
41,2745.2,1.22176,0.64207,0.91322,0.91281,0.85122,0.91633,0.65237,1.19753,0.62807,0.90787,0.00208,0.00208,0.00208
42,2806.7,1.19249,0.6267,0.90788,0.91169,0.86128,0.92124,0.6612,1.1831,0.61718,0.90377,0.001882,0.001882,0.001882
43,2870.09,1.1689,0.61751,0.90039,0.90741,0.86598,0.92156,0.66757,1.15748,0.61161,0.90016,0.001684,0.001684,0.001684
44,2934.03,1.16432,0.61023,0.8982,0.91263,0.86007,0.9229,0.67144,1.15466,0.60313,0.8991,0.001486,0.001486,0.001486
45,3002.24,1.14837,0.60515,0.89689,0.91449,0.877,0.92348,0.673,1.15704,0.60025,0.89912,0.001288,0.001288,0.001288
46,3067.9,1.13508,0.59757,0.89683,0.92661,0.87218,0.92665,0.67946,1.14001,0.58952,0.89707,0.00109,0.00109,0.00109
47,3131.63,1.13947,0.60009,0.89646,0.93252,0.87316,0.92597,0.67953,1.1276,0.58831,0.89417,0.000892,0.000892,0.000892
48,3198.39,1.11918,0.59247,0.89213,0.91522,0.87947,0.92699,0.68305,1.11992,0.5838,0.89126,0.000694,0.000694,0.000694
49,3263.54,1.11273,0.58876,0.88677,0.91699,0.87813,0.92749,0.68373,1.1187,0.5839,0.89114,0.000496,0.000496,0.000496
50,3329.12,1.1033,0.58223,0.88856,0.91535,0.88113,0.92798,0.68458,1.10934,0.57828,0.88993,0.000298,0.000298,0.000298`;

            Papa.parse(csvData, {
                header: true,
                complete: function(results) {
                    trainingData = results.data.map(row => ({
                        epoch: parseInt(row.epoch),
                        time: parseFloat(row.time),
                        trainBoxLoss: parseFloat(row['train/box_loss']),
                        trainClsLoss: parseFloat(row['train/cls_loss']),
                        trainDflLoss: parseFloat(row['train/dfl_loss']),
                        precision: parseFloat(row['metrics/precision(B)']),
                        recall: parseFloat(row['metrics/recall(B)']),
                        map50: parseFloat(row['metrics/mAP50(B)']),
                        map50_95: parseFloat(row['metrics/mAP50-95(B)']),
                        valBoxLoss: parseFloat(row['val/box_loss']),
                        valClsLoss: parseFloat(row['val/cls_loss']),
                        valDflLoss: parseFloat(row['val/dfl_loss']),
                        lr0: parseFloat(row['lr/pg0']),
                        lr1: parseFloat(row['lr/pg1']),
                        lr2: parseFloat(row['lr/pg2'])
                    }));

                    initializeVisualization();
                },
                error: function(error) {
                    document.getElementById('loading').innerHTML = 
                        '<div class="error">‚ùå Erro ao processar dados: ' + error.message + '</div>';
                }
            });
        }

        function initializeVisualization() {
            // Esconder loading e mostrar conte√∫do
            document.getElementById('loading').style.display = 'none';
            document.getElementById('content').style.display = 'block';

            // Criar estat√≠sticas principais
            createStatsCards();
            
            // Criar gr√°ficos
            createMetricsChart();
            createLossChart();
            createPrecisionRecallChart();
            createLearningRateChart();
            
            // Atualizar an√°lise detalhada
            updateDetailedAnalysis();
        }

        function createStatsCards() {
            const statsGrid = document.getElementById('statsGrid');
            const firstEpoch = trainingData[0];
            const lastEpoch = trainingData[trainingData.length - 1];

            const stats = [
                {
                    label: 'mAP50 Final',
                    value: (lastEpoch.map50 * 100).toFixed(1) + '%',
                    class: lastEpoch.map50 > 0.8 ? 'excellent' : lastEpoch.map50 > 0.5 ? 'good' : 'poor'
                },
                {
                    label: 'Precis√£o Final',
                    value: (lastEpoch.precision * 100).toFixed(1) + '%',
                    class: lastEpoch.precision > 0.8 ? 'excellent' : lastEpoch.precision > 0.5 ? 'good' : 'poor'
                },
                {
                    label: 'Recall Final',
                    value: (lastEpoch.recall * 100).toFixed(1) + '%',
                    class: lastEpoch.recall > 0.8 ? 'excellent' : lastEpoch.recall > 0.5 ? 'good' : 'poor'
                },
                {
                    label: 'Melhoria mAP50',
                    value: '+' + ((lastEpoch.map50 - firstEpoch.map50) * 100).toFixed(1) + '%',
                    class: 'excellent'
                },
                {
                    label: '√âpocas Treinadas',
                    value: lastEpoch.epoch,
                    class: 'good'
                },
                {
                    label: 'Tempo Total',
                    value: (lastEpoch.time / 60).toFixed(1) + ' min',
                    class: 'good'
                }
            ];

            statsGrid.innerHTML = stats.map(stat => `
                <div class="stat-card">
                    <div class="stat-value ${stat.class}">${stat.value}</div>
                    <div class="stat-label">${stat.label}</div>
                </div>
            `).join('');
        }

        function createMetricsChart() {
            const ctx = document.getElementById('metricsChart').getContext('2d');
            
            charts.metrics = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: trainingData.map(d => d.epoch),
                    datasets: [
                        {
                            label: 'mAP50(B)',
                            data: trainingData.map(d => d.map50),
                            borderColor: '#27ae60',
                            backgroundColor: 'rgba(39, 174, 96, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y'
                        },
                        {
                            label: 'mAP50-95(B)',
                            data: trainingData.map(d => d.map50_95),
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y'
                        },
                        {
                            label: 'Precision(B)',
                            data: trainingData.map(d => d.precision),
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y'
                        },
                        {
                            label: 'Recall(B)',
                            data: trainingData.map(d => d.recall),
                            borderColor: '#f39c12',
                            backgroundColor: 'rgba(243, 156, 18, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '√âpoca'
                            }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Valor da M√©trica'
                            },
                            min: 0,
                            max: 1
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: false
                        }
                    }
                }
            });
        }

        function createLossChart() {
            const ctx = document.getElementById('lossChart').getContext('2d');
            
            charts.loss = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: trainingData.map(d => d.epoch),
                    datasets: [
                        {
                            label: 'Train Box Loss',
                            data: trainingData.map(d => d.trainBoxLoss),
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Val Box Loss',
                            data: trainingData.map(d => d.valBoxLoss),
                            borderColor: '#c0392b',
                            backgroundColor: 'rgba(192, 57, 43, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Train Class Loss',
                            data: trainingData.map(d => d.trainClsLoss),
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Val Class Loss',
                            data: trainingData.map(d => d.valClsLoss),
                            borderColor: '#2980b9',
                            backgroundColor: 'rgba(41, 128, 185, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '√âpoca'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Valor da Perda'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
        }

        function createPrecisionRecallChart() {
            const ctx = document.getElementById('precisionRecallChart').getContext('2d');
            
            charts.precisionRecall = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Precision vs Recall',
                        data: trainingData.map(d => ({
                            x: d.recall,
                            y: d.precision
                        })),
                        backgroundColor: trainingData.map((d, i) => {
                            const alpha = (i + 1) / trainingData.length;
                            return `rgba(52, 152, 219, ${alpha})`;
                        }),
                        borderColor: '#3498db',
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Recall'
                            },
                            min: 0,
                            max: 1
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Precision'
                            },
                            min: 0,
                            max: 1
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const epoch = trainingData[context.dataIndex].epoch;
                                    return `√âpoca ${epoch}: Precision=${context.parsed.y.toFixed(3)}, Recall=${context.parsed.x.toFixed(3)}`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function createLearningRateChart() {
            const ctx = document.getElementById('learningRateChart').getContext('2d');
            
            charts.learningRate = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: trainingData.map(d => d.epoch),
                    datasets: [
                        {
                            label: 'Learning Rate (pg0)',
                            data: trainingData.map(d => d.lr0),
                            borderColor: '#9b59b6',
                            backgroundColor: 'rgba(155, 89, 182, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Learning Rate (pg1)',
                            data: trainingData.map(d => d.lr1),
                            borderColor: '#8e44ad',
                            backgroundColor: 'rgba(142, 68, 173, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Learning Rate (pg2)',
                            data: trainingData.map(d => d.lr2),
                            borderColor: '#7d3c98',
                            backgroundColor: 'rgba(125, 60, 152, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '√âpoca'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Taxa de Aprendizado'
                            },
                            type: 'logarithmic'
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
        }

        function updateDetailedAnalysis() {
            const firstEpoch = trainingData[0];
            const lastEpoch = trainingData[trainingData.length - 1];

            // Atualizar valores na an√°lise detalhada
            document.getElementById('map50-start').textContent = (firstEpoch.map50 * 100).toFixed(1);
            document.getElementById('map50-end').textContent = (lastEpoch.map50 * 100).toFixed(1);
            document.getElementById('precision-final').textContent = (lastEpoch.precision * 100).toFixed(1);
            document.getElementById('recall-final').textContent = (lastEpoch.recall * 100).toFixed(1);
            document.getElementById('box-loss-start').textContent = firstEpoch.valBoxLoss.toFixed(3);
            document.getElementById('box-loss-end').textContent = lastEpoch.valBoxLoss.toFixed(3);
            document.getElementById('cls-loss-start').textContent = firstEpoch.valClsLoss.toFixed(3);
            document.getElementById('cls-loss-end').textContent = lastEpoch.valClsLoss.toFixed(3);
            document.getElementById('dfl-loss-start').textContent = firstEpoch.valDflLoss.toFixed(3);
            document.getElementById('dfl-loss-end').textContent = lastEpoch.valDflLoss.toFixed(3);
        }

        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>
